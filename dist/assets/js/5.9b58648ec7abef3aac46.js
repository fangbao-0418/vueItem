/*! This file is created by fangbao */
webpackJsonp([5],{573:function(t,e,a){a(592);var o=a(5)(a(588),a(603),"data-v-0682e644",null);o.options.__file="/Users/gaoyanru/Documents/wanglibao/BBS/src/views/personNews.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),o.options.functional,t.exports=o.exports},588:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(133);e.default={components:{ScrollWrapper:o.ScrollWrapper,WlbHeader:o.WlbHeader,NewsItem:o.NewsItem,Loadmore:o.Loadmore,NoMore:o.NoMore},data:function(){return{data:[],page:1,lastPage:1,nomore:!1}},created:function(){var t=this;this.$plugin.loading.show(!0,"full"),this.loadData(function(){t.$plugin.loading.show(!1)})},computed:{allLoaded:function(){return this.nomore}},methods:{loadData:function(t){var e=this;this.$http({url:this.$api.api_list,method:"getBbsUserPm",params:[{pageNum:this.$const.BBS_USER_PM_PAGE_NUM,page:this.page}]}).then(function(a){e.page+=1,e.lastPage=a.data.result.data.last_page,e.lastPage+1>=e.page&&(2===e.page?e.data=a.data.result.data.list:e.data=e.data.concat(a.data.result.data.list)),e.lastPage<e.page?e.nomore=!0:e.nomore=!1,t&&t()})},loadTop:function(){var t=this;this.page=1,this.$plugin.loading.show(!0),this.loadData(function(){t.$plugin.loading.show(!1),t.$refs.loadmore.$children[0].onTopLoaded()})},loadBottom:function(){var t=this;if(this.page>this.lastPage)return"";this.$plugin.loading.show(!0),this.loadData(function(){t.$plugin.loading.show(!1),t.$refs.loadmore.$children[0].onBottomLoaded()})},doDel:function(){var t=this;this.$rulemodal.show(!1),this.$http({url:this.$api.api_list,method:"delBbsUserAllPm",params:[{}]}).then(function(e){t.data=[],t.$rulemodal.show({content:"已全部删除了消息",style:"text-align: center"})})},allDel:function(){var t=this;0===this.data.length?this.$rulemodal.show({content:"没有可删除的消息",style:"text-align: center"}):this.$rulemodal.show({content:"已全部删除了消息",style:"text-align: center",ok:{callback:function(){t.doDel()}}})}}}},592:function(t,e){},603:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view"},[a("wlb-header",[a("span",{slot:"title"},[t._v("我的消息")]),t._v(" "),a("span",{staticClass:"rightBtnText",on:{click:t.allDel},slot:"right"},[t._v("全部删除")])]),t._v(" "),a("scroll-wrapper",[t.data.length?a("loadmore",{ref:"loadmore",attrs:{"cb-load-top":t.loadTop,"cb-load-bottom":t.loadBottom,"all-loaded":t.allLoaded}},[a("div",{staticStyle:{"min-height":"8rem"}},[t._l(t.data,function(t,e){return a("news-item",{key:e,attrs:{item:t}})}),t._v(" "),t.data.length>0?a("no-more",{attrs:{visible:t.nomore}}):t._e()],2)]):t._e(),t._v(" "),0===t.data.length?a("div",{staticClass:"empty"},[a("div",[t._v("还没有消息哦")])]):t._e()],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});